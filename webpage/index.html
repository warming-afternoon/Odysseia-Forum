<html lang="zh-CN">

<head>
	<meta charset="utf-8">
	<meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" name="viewport">
	<title>类脑索引页</title>
	
	<!-- Favicon -->
	<link rel="icon" type="image/webp" href="https://cdn.discordapp.com/avatars/1389231153940136088/b63807ba45fc142152aeb0dc5649d6a5.webp">
	<link rel="apple-touch-icon" href="https://cdn.discordapp.com/avatars/1389231153940136088/b63807ba45fc142152aeb0dc5649d6a5.webp">
	
	<!-- Discord Embed Meta (Open Graph) -->
	<meta property="og:type" content="website">
	<meta property="og:title" content="类脑ΟΔΥΣΣΕΙΑ - 索引页">
	<meta property="og:description" content="探索类脑社区的帖子、资源和讨论。搜索、关注、发现精彩内容。">
	<meta property="og:image" content="https://cdn.discordapp.com/icons/1134557553011998840/d419091a2a50009ddee0617ac43b0ead.png">
	<meta property="og:url" content="">
	<meta property="og:site_name" content="类脑ΟΔΥΣΣΕΙΑ">
	
	<!-- Twitter Card Meta -->
	<meta name="twitter:card" content="summary_large_image">
	<meta name="twitter:title" content="类脑ΟΔΥΣΣΕΙΑ - 索引页">
	<meta name="twitter:description" content="探索类脑社区的帖子、资源和讨论。搜索、关注、发现精彩内容。">
	<meta name="twitter:image" content="https://cdn.discordapp.com/icons/1134557553011998840/d419091a2a50009ddee0617ac43b0ead.png">
	
	<!-- Theme Color for Discord -->
	<meta name="theme-color" content="#5865F2">
	
	<script src="https://cdn.tailwindcss.com"></script>
	<link
		href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200"
		rel="stylesheet">
	<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&amp;display=swap" rel="stylesheet">
	<script>
		tailwind.config = {
			theme: {
				extend: {
					fontFamily: { sans: ['Inter', 'sans-serif'] },
					colors: {
						discord: {
							bg: '#36393f',
							sidebar: '#2f3136',
							element: '#202225',
							primary: '#5865F2',
							hover: '#4752c4',
							green: '#3ba55c',
							red: '#ed4245',
							text: '#dcddde',
							muted: '#72767d',
							dark: '#18191c'
						}
					},
					transitionTimingFunction: {
						'bounce-in': 'cubic-bezier(0.34, 1.56, 0.64, 1)',
					}
				}
			}
		}
	</script>
	<link rel="stylesheet" href="style.css">
</head>

<body class="bg-discord-bg text-discord-text font-sans h-screen flex overflow-hidden">

	<!-- Sidebar Backdrop (Mobile) -->
	<div class="fixed inset-0 bg-black/70 z-30 hidden md:hidden opacity-0 transition-opacity duration-300"
		id="sidebar-backdrop" onclick="app.toggleSidebar(false)"></div>

	<!-- Detail Overlay (全局唯一的详情弹窗容器，移动端和桌面端通用) -->
	<div class="detail-overlay" id="mobile-detail-overlay" onclick="app.closeMobileDetail(event)">
		<div class="detail-expanded-card" id="mobile-detail-card" onclick="event.stopPropagation()">
			<!-- Content Injected by JS -->
		</div>
	</div>

	<!-- Sidebar -->
	<aside
		class="fixed inset-y-0 left-0 z-40 w-72 bg-discord-sidebar flex flex-col border-r border-black/10 transform -translate-x-full md:translate-x-0 md:static md:w-64 md:flex-shrink-0 shadow-2xl md:shadow-none transition-transform duration-300 ease-in-out"
		id="sidebar">
		<div class="p-4 font-bold text-lg text-white border-b border-black/10 flex items-center justify-between">
			<div class="flex items-center gap-2">
				<img src="https://cdn.discordapp.com/icons/1134557553011998840/d419091a2a50009ddee0617ac43b0ead.png" alt="类脑ΟΔΥΣΣΕΙΑ" class="w-7 h-7 rounded-full">
				<span>类脑ΟΔΥΣΣΕΙΑ</span>
			</div>
			<button class="md:hidden text-discord-muted hover:text-white" onclick="app.toggleSidebar(false)">
				<span class="material-symbols-outlined">close</span>
			</button>
		</div>
		<!-- Navigation -->
		<nav class="flex-1 overflow-y-auto p-2 space-y-1">
			<button
				class="w-full flex items-center gap-3 px-3 py-2 rounded hover:bg-discord-element text-white bg-discord-element transition-colors text-left"
				id="nav-search" onclick="app.switchView('search')">
				<span class="material-symbols-outlined text-gray-400">search</span>
				<span>搜索发现</span>
			</button>
			<button
				class="w-full flex items-center gap-3 px-3 py-2 rounded hover:bg-discord-element transition-colors text-left relative text-discord-muted"
				id="nav-follows" onclick="app.switchView('follows')">
				<span class="material-symbols-outlined text-gray-400">bookmarks</span>
				<span>关注列表</span>
				<span
					class="absolute right-2 bg-discord-red text-white text-xs font-bold px-1.5 py-0.5 rounded-full hidden"
					id="sidebar-badge">0</span>
			</button>
			<div id="channel-list-container">
				<!-- Channels will be injected here -->
			</div>
		</nav>
		<!-- User Profile -->
		<div class="p-3 bg-discord-element flex items-center gap-2 border-t border-black/10">
			<div class="flex items-center gap-2 w-full" id="user-area"><button onclick="app.login()"
					class="w-full bg-discord-primary text-white py-2 rounded text-sm">Discord 登录</button></div>
		</div>
	</aside>

	<!-- Sidebar Mini Banner (Desktop Only, Draggable) -->
	<div class="sidebar-banner hidden md:block" id="sidebar-banner">
		<div class="sidebar-banner-container">
			<!-- 拖动手柄 -->
			<div class="sidebar-banner-drag-handle" title="拖动移动位置"></div>
			<div class="sidebar-banner-slides">
				<div class="sidebar-banner-slide active">
					<img src="banner.png" class="w-full h-full object-cover">
				</div>
			</div>
			<div class="sidebar-banner-info">
				<span class="sidebar-banner-title">欢迎</span>
				<div class="sidebar-banner-actions">
					<button class="sidebar-banner-link-btn hidden" id="sidebar-banner-app-btn" onclick="app.openCurrentBannerApp()" title="在APP中打开">
						<span class="material-symbols-outlined">open_in_new</span>
					</button>
					<button class="sidebar-banner-link-btn hidden" id="sidebar-banner-web-btn" onclick="app.openCurrentBannerWeb()" title="在浏览器中打开">
						<span class="material-symbols-outlined">public</span>
					</button>
					<button class="sidebar-banner-close-btn" onclick="app.closeSidebarBanner()" title="关闭">
						<span class="material-symbols-outlined">close</span>
					</button>
				</div>
			</div>
		</div>
	</div>

	<!-- Banner Application Modal -->
	<div class="banner-application-modal hidden" id="banner-application-modal" onclick="app.closeBannerApplicationModal()">
		<div class="banner-application-content" onclick="event.stopPropagation()">
			<div class="banner-application-header">
				<h3 class="text-lg font-bold text-white flex items-center gap-2">
					<span class="material-symbols-outlined text-discord-primary">add_photo_alternate</span>
					申请Banner展示位
				</h3>
				<button class="text-discord-muted hover:text-white" onclick="app.closeBannerApplicationModal()">
					<span class="material-symbols-outlined">close</span>
				</button>
			</div>
			<div class="banner-rules-notice">
				<span class="material-symbols-outlined">info</span>
				<span>申请前请先阅读</span>
				<a href="https://discord.com/channels/1134557553011998840/1307242450300964986/1442755349311651901" target="_blank" rel="noopener noreferrer" class="rules-link">
					《Banner展示位申请规定》
					<span class="material-symbols-outlined text-xs">open_in_new</span>
				</a>
			</div>
			<form class="banner-application-form" onsubmit="app.submitBannerApplication(event)">
				<div class="form-group">
					<label for="banner-thread-id">
						<span class="material-symbols-outlined text-sm">tag</span>
						帖子ID <span class="text-discord-red">*</span>
					</label>
					<input type="text" id="banner-thread-id" placeholder="请输入帖子的Thread ID（纯数字）" required pattern="\d{17,20}">
					<span class="form-hint">只能为自己的帖子申请Banner</span>
				</div>
				<div class="form-group">
					<label for="banner-cover-url">
						<span class="material-symbols-outlined text-sm">image</span>
						封面图链接 <span class="text-discord-red">*</span>
					</label>
					<input type="url" id="banner-cover-url" placeholder="https://..." required>
					<span class="form-hint">推荐尺寸 16:9，支持 JPG/PNG/WebP</span>
				</div>
				<div class="form-group">
					<label for="banner-scope">
						<span class="material-symbols-outlined text-sm">visibility</span>
						展示范围 <span class="text-discord-red">*</span>
					</label>
					<select id="banner-scope" required>
						<option value="">请选择展示范围</option>
					</select>
					<span class="form-hint">全频道最多3个，单频道最多5个</span>
				</div>
				<div id="banner-application-error" class="form-error hidden"></div>
				<div class="form-actions">
					<button type="button" class="btn-cancel" onclick="app.closeBannerApplicationModal()">取消</button>
					<button type="submit" class="btn-submit" id="banner-submit-btn">
						<span class="material-symbols-outlined">send</span>
						提交申请
					</button>
				</div>
			</form>
		</div>
	</div>

	<!-- Main Content -->
	<main class="flex-1 flex flex-col min-w-0 overflow-hidden relative bg-discord-bg">
		<!-- Header -->
		<header class="bg-discord-sidebar border-b border-black/10 p-3 md:p-4 shadow-sm z-20">
			<div class="flex flex-col gap-3">
				<div class="flex gap-2 items-center">
					<button class="md:hidden p-2 text-discord-muted hover:text-white -ml-2"
						onclick="app.toggleSidebar(true)">
						<span class="material-symbols-outlined">menu</span>
					</button>
					<div class="relative flex-1">
						<input
							class="w-full bg-discord-element text-white placeholder-discord-muted rounded px-4 py-2 pl-10 focus:outline-none focus:ring-2 focus:ring-discord-primary transition-all text-sm"
							id="search-input" placeholder="搜索关键词..." type="text">
						<span
							class="material-symbols-outlined absolute left-3 top-2 text-discord-muted text-[18px]">search</span>
					</div>
					<button
						class="bg-discord-primary hover:bg-discord-hover text-white px-4 py-2 rounded font-medium transition-colors text-sm shadow-md active:scale-95"
						onclick="app.executeSearch()">
						搜索
					</button>
				</div>
				<!-- Filters -->
				<div class="flex items-center gap-2 overflow-x-auto pb-1 hide-scrollbar text-xs md:text-sm">
					<div
						class="flex items-center gap-2 bg-discord-element px-2 py-1.5 rounded flex-shrink-0 border border-white/5">
						<span class="text-discord-muted material-symbols-outlined text-[16px]">calendar_today</span>
						<input class="bg-transparent text-white focus:outline-none w-20 md:w-auto" id="date-start"
							onchange="app.executeSearch()" type="date">
						<span class="text-discord-muted">-</span>
						<input class="bg-transparent text-white focus:outline-none w-20 md:w-auto" id="date-end"
							onchange="app.executeSearch()" type="date">
					</div>
					<div class="sort-select-wrapper">
						<span class="text-discord-muted material-symbols-outlined text-[16px]">sort</span>
						<select class="sort-select" id="sort-method" onchange="app.executeSearch()">
							<option value="comprehensive">综合排序</option>
							<option value="last_active" selected>最近活跃</option>
							<option value="created_at">最新发布</option>
							<option value="reply_count">回复最多</option>
						</select>
						<span class="sort-select-arrow material-symbols-outlined">expand_more</span>
					</div>
					<button
						class="p-1.5 rounded hover:bg-white/10 text-discord-muted hover:text-white transition-colors"
						id="sort-order-btn" onclick="app.toggleSortOrder()">
						<span class="material-symbols-outlined text-[18px]">arrow_downward</span>
					</button>
				</div>
			</div>
		</header>

		<!-- Content Scroll -->
		<div class="flex-1 overflow-y-auto p-3 md:p-6 scroll-smooth relative" id="content-scroll">
			<!-- Banner -->
			<div class="banner-section mb-6" id="banner-section">
				<div class="banner-container relative w-full rounded-xl overflow-hidden shadow-lg bg-discord-element border border-white/5">
					<div class="banner-slides-wrapper" id="banner-slides">
						<img src="banner.png" class="w-full h-full object-cover">
					</div>
					<div class="banner-overlay absolute bottom-0 left-0 w-full bg-gradient-to-t from-discord-dark via-discord-dark/80 to-transparent p-4 pt-12 flex flex-col justify-end">
						<div class="flex items-end justify-between gap-4">
							<div class="flex-1 min-w-0">
								<h2 class="text-lg md:text-2xl font-bold text-white mb-1 drop-shadow-lg line-clamp-1" id="banner-title">欢迎来到类脑索引</h2>
								<p class="text-xs text-gray-300 flex items-center gap-1 drop-shadow">
									<span class="material-symbols-outlined text-xs text-yellow-400">star</span> 推荐
								</p>
							</div>
							<div class="banner-links hidden flex-shrink-0 flex items-center gap-2" id="banner-links">
								<button onclick="app.openCurrentBannerApp()" class="bg-discord-primary hover:bg-discord-hover text-white px-3 py-1.5 rounded text-xs font-bold flex items-center gap-1 shadow transition-colors">
									<span class="material-symbols-outlined text-sm">open_in_new</span> APP
								</button>
								<button onclick="app.openCurrentBannerWeb()" class="bg-discord-sidebar hover:bg-gray-700 text-white px-3 py-1.5 rounded text-xs font-bold flex items-center gap-1 border border-white/10 transition-colors">
									<span class="material-symbols-outlined text-sm">public</span> WEB
								</button>
							</div>
						</div>
					</div>
					<!-- 折叠按钮 -->
					<button class="banner-collapse-btn" onclick="app.toggleBannerCollapse()" title="折叠/展开Banner">
						<span class="material-symbols-outlined">expand_less</span>
					</button>
					<!-- 申请Banner按钮 -->
					<button class="banner-apply-btn" onclick="app.openBannerApplicationModal()" title="申请Banner展示位">
						<span class="material-symbols-outlined">add_photo_alternate</span>
						<span class="banner-apply-text">申请</span>
					</button>
				</div>
				<!-- 折叠后的提示条 -->
				<div class="banner-collapsed-bar" onclick="app.toggleBannerCollapse()">
					<span class="material-symbols-outlined text-sm">image</span>
					<span>展开Banner</span>
					<span class="material-symbols-outlined text-sm">expand_more</span>
				</div>
			</div>

			<!-- Tags -->
			<div class="mb-4 hidden" id="tags-section">
				<div
					class="flex items-center gap-3 bg-discord-element px-3 py-2 rounded-lg w-full overflow-x-auto border border-white/5 mb-3">
					<button class="text-xs font-bold px-2 py-0.5 rounded bg-discord-primary text-white flex-shrink-0"
						id="logic-and" onclick="app.setTagLogic('and')">AND</button>
					<button
						class="text-xs font-bold px-2 py-0.5 rounded text-discord-muted hover:text-white flex-shrink-0"
						id="logic-or" onclick="app.setTagLogic('or')">OR</button>
					<div class="w-[1px] h-4 bg-white/10 mx-1"></div>
					<button
						class="flex items-center gap-1 text-xs px-2 py-0.5 rounded bg-discord-green/20 text-discord-green border border-discord-green flex-shrink-0"
						id="mode-include" onclick="app.setTagMode('include')">
						<span class="material-symbols-outlined text-[14px]">add</span> 包含
					</button>
					<button
						class="flex items-center gap-1 text-xs px-2 py-0.5 rounded text-discord-muted border border-transparent hover:border-discord-red hover:text-discord-red flex-shrink-0"
						id="mode-exclude" onclick="app.setTagMode('exclude')">
						<span class="material-symbols-outlined text-[14px]">block</span> 排除
					</button>
				</div>
				<div class="flex flex-wrap gap-2 max-h-24 overflow-y-auto" id="tag-cloud"><button
						onclick="app.handleTagClick('ui')"
						class="tag-pill text-xs px-2 py-1 rounded flex items-center gap-1 bg-discord-element border border-transparent text-discord-muted hover:border-gray-500">#ui</button><button
						onclick="app.handleTagClick('design')"
						class="tag-pill text-xs px-2 py-1 rounded flex items-center gap-1 bg-discord-element border border-transparent text-discord-muted hover:border-gray-500">#design</button><button
						onclick="app.handleTagClick('code')"
						class="tag-pill text-xs px-2 py-1 rounded flex items-center gap-1 bg-discord-element border border-transparent text-discord-muted hover:border-gray-500">#code</button>
				</div>
			</div>

			<!-- Results Header -->
			<div class="mb-4 flex items-center justify-between">
				<h2 class="text-lg font-semibold text-white flex items-center gap-2" id="view-title">搜索结果</h2>
				<div class="text-xs text-discord-muted" id="result-stats">找到 99 结果</div>
			</div>

			<!-- Results Grid -->
			<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 md:gap-6" id="results-grid"></div>

			<!-- Pagination -->
			<div class="mt-8 flex justify-center pb-10">
				<button
					class="px-8 py-2.5 bg-discord-element hover:bg-discord-sidebar rounded-full text-white font-medium transition-all disabled:opacity-50 shadow-lg border border-white/5"
					id="load-more-btn" onclick="app.loadMore()">加载更多</button>
			</div>
			<!-- Spinner -->
			<div class="mt-12 flex justify-center hidden" id="loading-spinner">
				<div class="animate-spin rounded-full h-10 w-10 border-t-2 border-b-2 border-discord-primary"></div>
			</div>
		</div>
	</main>

	<script src="config.js"></script>
	<script src="script.js"></script>


</body>

</html>